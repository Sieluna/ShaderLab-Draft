"use strict";(self.webpackChunkshaderlab=self.webpackChunkshaderlab||[]).push([[981],{1602:(e,t,s)=>{s.d(t,{z:()=>i});var a=s(8492);const n=e=>{let t=e.headers.get("content-type");return t.includes("application/json")?l(e):t.includes("text/html")?r(e):void(0,a.swal)({icon:"error",title:"Oops...",text:`Check ${t}`}).then()},l=e=>e.json().then((t=>{if(e.ok)return t})),r=e=>e.text().then((t=>e.ok?t:((0,a.swal)({icon:"error",title:"Oops...",text:t}).then(),null))),i=(e,t,s)=>fetch(e,t).then(n).then(s).catch((e=>console.log(e)))},4981:(e,t,s)=>{s.r(t),s.d(t,{searchFeature:()=>x});const a=document.querySelector("sl-nav").shadowRoot,n=a.querySelector(".sl-nav__bar .search-panel .search-history"),l=a.querySelector(".sl-nav__bar .search-panel .history-clear"),r=a.querySelector(".sl-nav__bar #nav-search .nav-search-btn");let i=JSON.parse(localStorage.getItem("history"))||{},o=[];const c=e=>{Object.keys(e).sort(((t,s)=>e[s]-e[t])).forEach(((e,t)=>{if(t<6)if(o[t])o[t].innerHTML=`<div>${e}</div>\n                                                 <div style="font-size: 16px top: 14px">&#10548</div>`;else{const s=document.createElement("a");s.classList.add("history-item"),s.innerHTML=`<div>${e}</div>\n                                     <div style="font-size: 16px top: 14px">&#10548</div>`,o[t]=s,n.append(o[t])}}))};var u=s(1602);const h=document.querySelector("sl-nav").shadowRoot,p=h.querySelector(".sl-nav__bar .container-extend"),d=h.querySelector(".sl-nav__bar .bar-outer"),v=h.querySelector(".sl-nav__bar .search-panel"),y=h.querySelector(".sl-nav__bar .search-panel .search-history"),b=h.querySelector(".sl-nav__bar .search-panel .suggestion"),g=h.querySelector(".sl-nav__bar #nav-search"),S=h.querySelector(".sl-nav__bar #nav-search .nav-search-input"),E=h.querySelector(".sl-nav__bar #nav-search .nav-search-clean"),F=h.querySelector(".sl-nav__bar #nav-search .nav-search-btn");let m=new class{constructor(){this.suggestionCache=[],this.inputExistFlag=!0,this.inputFocusFlag=!1,this.panelFocusFlag=!1,this.inputSearchFlag=!1}loadSuggestionPrefabs(e){const t=(e,t)=>{if(t)return t.className=""==e?"":"suggestion-item",t.innerText=e,t;{let t=document.createElement("a");return t.className=""==e?"":"suggestion-item",t.innerText=e,b.append(t),t}};(0,u.z)(`/api/search/post/${S.value}`,{method:"GET"},(s=>{if("string"==typeof s||null==s){for(let s=0;s<e;s++)this.suggestionCache[s]=t("",this.suggestionCache[s]);this.inputExistFlag=!1,this.panelExtendClose()}else{for(let a=0;a<e;a++)this.suggestionCache[a]=t(void 0!==s[a]?s[a].name:"",this.suggestionCache[a]);this.inputExistFlag=!0,this.panelExtendOpen()}}))}set inputFocus(e){this.inputFocusFlag=e,this.update()}set panelFocus(e){this.panelFocusFlag=e,this.update()}update(){const e=this.inputFocusFlag||this.panelFocusFlag;this.inputSearchFlag?this.panelSearchOpen():this.panelSearchClose(),e!==this.cache&&((this.cache=e)?(this.panelInitOpen(),this.inputExistFlag&&this.panelExtendOpen()):(this.panelInitClose(),this.panelExtendClose()))}searchClean(){S.value="",S.blur()}panelInitOpen(){p.setAttribute("class","container-extend is-focus"),d.setAttribute("style","display: block"),g.setAttribute("class","is-focus")}panelInitClose(){p.setAttribute("class","container-extend"),d.setAttribute("style","display: none"),g.removeAttribute("class")}panelExtendOpen(){g.setAttribute("style","border-radius: 8px 8px 0 0"),v.removeAttribute("style")}panelExtendClose(){g.setAttribute("style","border-radius: 8px"),v.setAttribute("style","display: none")}panelSearchOpen(){this.inputSearchFlag=!0,y.setAttribute("style","display: none"),b.setAttribute("style","display: block")}panelSearchClose(e=!1){this.inputSearchFlag=!1,y.setAttribute("style","display: block"),b.setAttribute("style","display: none"),e||this.panelExtendOpen()}};const x=(e="home")=>{var t;t=S,c(i),l.addEventListener("click",(()=>{a.querySelectorAll(".sl-nav__bar .search-panel .history-item").forEach((e=>e.remove())),localStorage.removeItem("history"),i={},o=[]})),r.addEventListener("click",(()=>{t.value.length>0&&(i[t.value]=Date.now(),localStorage.setItem("history",JSON.stringify(i)),c(i))})),E.addEventListener("click",(()=>{m.panelSearchClose(),m.searchClean()})),E.addEventListener("mouseover",(()=>m.panelFocus=!0)),S.addEventListener("focusout",(()=>m.inputFocus=!1)),S.addEventListener("focusin",(()=>m.inputFocus=!0)),S.addEventListener("input",(()=>{S.value.length>0?(m.panelSearchOpen(),m.loadSuggestionPrefabs(6)):(m.panelSearchClose(),m.inputExistFlag=!0)})),S.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),F.click())})),F.addEventListener("click",(()=>{if(m.panelSearchClose(!0),m.searchClean(),"home"===e){document.querySelector("sl-layout").shadowRoot.querySelector(".sl-layout__holder").scrollIntoView({block:"start",inline:"start",behavior:"smooth"})}})),d.addEventListener("click",(()=>m.panelFocus=!1)),v.addEventListener("mouseover",(()=>m.panelFocus=!0))}}}]);