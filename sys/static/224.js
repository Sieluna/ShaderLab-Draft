"use strict";(self.webpackChunkshaderlab=self.webpackChunkshaderlab||[]).push([[224],{224:(e,t,s)=>{s.r(t),s.d(t,{shaderFeature:()=>l});var a=s(602);const n=document.querySelector(".sl-layout__holder"),r=document.querySelector(".sl-layout__recommend");let i=JSON.parse(localStorage.getItem("cache"))||{},c={};class d{constructor(e){this.id=e.id,this.name=e.name,this.avatar=e.user.avatar,this.user=e.user.name,this.image=e.preview,this.content=e.content,this.update=e.post_update}prefab(e,t=!0){const s=document.createElement("div");var a;return s.className=e,s.innerHTML=`\n            <a>\n                <div class="shader-preview">\n                    <img src="${this.image}">\n                    \x3c!--canvas ></canvas--\x3e\n                </div>\n                <div class="shader-bottom">\n                    <img class="shader-avatar" src="${this.avatar}">\n                    <div class="shader-text">\n                        <h2 class="shader-name">${this.name}</h2>\n                        ${a=this.user,t?`<div class="shader-user">${a}</div>`:""}\n                    </div>\n                    ${(e=>t?"":`<div class="shader-user">-- ${e}</div>`)(this.user)}\n                </div>\n            </a>`,s}}class o extends d{constructor(e){super(e)}static init(){(0,a.z)("/api/post",{method:"GET"},(e=>{for(let t of e)i[t.id]=new o(t),c[t.id]=i[t.id].prefab("shader-info"),n.append(c[t.id])}))}}class h extends d{constructor(e){super(e)}static init(){(0,a.z)("/api/post/recommend",{method:"GET"},(e=>{for(let[t,s]of e.entries())i[`Recommend_${s.id}`]=new h(s),c[`Recommend_${s.id}`]=0===t?i[`Recommend_${s.id}`].prefab("shader-info top",!1):i[`Recommend_${s.id}`].prefab("shader-info"),r.append(c[`Recommend_${s.id}`])}))}}const l=()=>{o.init(),h.init()}},602:(e,t,s)=>{s.d(t,{z:()=>i});const a=e=>{let t=e.headers.get("content-type");return t.includes("application/json")?n(e):t.includes("text/html")?r(e):void Swal.fire({icon:"error",title:"Oops...",text:`Check ${t}`})},n=e=>e.json().then((t=>{if(e.ok)return t})),r=e=>e.text().then((t=>e.ok?t:(Swal.fire({icon:"error",title:"Oops...",text:t}),null))),i=(e,t,s)=>fetch(e,t).then(a).then(s).catch((e=>console.log(e)))}}]);