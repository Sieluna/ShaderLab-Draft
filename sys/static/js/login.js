(()=>{"use strict";let e=document.querySelector(".sl-background"),t=e.querySelector(".small"),l=localStorage.getItem("token");const o=e=>{e&&(window.location.href="../home.html")};o(l);const a=(e="")=>{fetch("/api/user"+e,{method:"POST",body:new URLSearchParams(new FormData(document.getElementById("panel-input"))),redirect:"follow"}).then((e=>e.json())).then((e=>{200===e.status?(localStorage.setItem("token",JSON.stringify(e.data)),o(!0)):alert(e.msg)}))};window.onload=()=>{(()=>{let l=new Image;l.src=t.src,l.onload=()=>t.classList.add("loaded");let o=new Image;o.src=e.dataset.large,o.onload=()=>o.classList.add("loaded"),e.appendChild(o)})(),document.querySelector(".sl-panel > .panel-login > .register").addEventListener("click",(()=>a())),document.querySelector(".sl-panel > .panel-login > .login").addEventListener("click",(()=>a("/login")))}})();