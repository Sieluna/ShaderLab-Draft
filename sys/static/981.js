"use strict";(self.webpackChunkshaderlab=self.webpackChunkshaderlab||[]).push([[981],{602:(e,t,s)=>{s.d(t,{z:()=>l});const n=e=>{let t=e.headers.get("content-type");return t.includes("application/json")?a(e):t.includes("text/html")?r(e):void Swal.fire({icon:"error",title:"Oops...",text:`Check ${t}`})},a=e=>e.json().then((t=>{if(e.ok)return t})),r=e=>e.text().then((t=>e.ok?t:(Swal.fire({icon:"error",title:"Oops...",text:t}),null))),l=(e,t,s)=>fetch(e,t).then(n).then(s).catch((e=>console.log(e)))},981:(e,t,s)=>{s.r(t),s.d(t,{searchFeature:()=>F});const n=document.querySelector(".sl-nav__bar .search-panel .search-history"),a=document.querySelector(".sl-nav__bar .search-panel .history-clear"),r=document.querySelector(".sl-nav__bar #nav-search .nav-search-btn");let l=JSON.parse(localStorage.getItem("history"))||{},i=[];const o=e=>{Object.keys(e).sort(((t,s)=>e[s]-e[t])).forEach(((e,t)=>{if(t<6)if(i[t])i[t].innerHTML=`<div>${e}</div>\n                                                 <div style="font-size: 16px top: 14px">&#10548</div>`;else{const s=document.createElement("a");s.classList.add("history-item"),s.innerHTML=`<div>${e}</div>\n                                     <div style="font-size: 16px top: 14px">&#10548</div>`,i[t]=s,n.append(i[t])}}))};var c=s(602);const u=document.querySelector(".sl-nav__bar .container-extend"),h=document.querySelector(".sl-nav__bar .bar-outer"),p=document.querySelector(".sl-nav__bar .search-panel"),d=document.querySelector(".sl-nav__bar .search-panel .search-history"),v=document.querySelector(".sl-nav__bar .search-panel .suggestion"),y=document.querySelector(".sl-nav__bar #nav-search"),b=document.querySelector(".sl-nav__bar #nav-search .nav-search-input"),g=document.querySelector(".sl-nav__bar #nav-search .nav-search-clean"),m=document.querySelector(".sl-nav__bar #nav-search .nav-search-btn"),S=document.querySelector(".sl-layout__holder");let E=new class{constructor(){this.suggestionCache=[],this.inputExistFlag=!0,this.inputFocusFlag=!1,this.panelFocusFlag=!1,this.inputSearchFlag=!1}loadSuggestionPrefabs(e){const t=(e,t)=>{if(t)return t.className=""==e?"":"suggestion-item",t.innerText=e,t;{let t=document.createElement("a");return t.className=""==e?"":"suggestion-item",t.innerText=e,v.append(t),t}};(0,c.z)(`/api/search/post/${b.value}`,{method:"GET"},(s=>{if("string"==typeof s||null==s){for(let s=0;s<e;s++)this.suggestionCache[s]=t("",this.suggestionCache[s]);this.inputExistFlag=!1,this.panelExtendClose()}else{for(let n=0;n<e;n++)this.suggestionCache[n]=t(void 0!==s[n]?s[n].name:"",this.suggestionCache[n]);this.inputExistFlag=!0,this.panelExtendOpen()}}))}set inputFocus(e){this.inputFocusFlag=e,this.update()}set panelFocus(e){this.panelFocusFlag=e,this.update()}update(){const e=this.inputFocusFlag||this.panelFocusFlag;this.inputSearchFlag?this.panelSearchOpen():this.panelSearchClose(),e!==this.cache&&((this.cache=e)?(this.panelInitOpen(),this.inputExistFlag&&this.panelExtendOpen()):(this.panelInitClose(),this.panelExtendClose()))}searchClean(){b.value="",b.blur()}panelInitOpen(){u.setAttribute("class","container-extend is-focus"),h.setAttribute("style","display: block"),y.setAttribute("class","is-focus")}panelInitClose(){u.setAttribute("class","container-extend"),h.setAttribute("style","display: none"),y.removeAttribute("class")}panelExtendOpen(){y.setAttribute("style","border-radius: 8px 8px 0 0"),p.removeAttribute("style")}panelExtendClose(){y.setAttribute("style","border-radius: 8px"),p.setAttribute("style","display: none")}panelSearchOpen(){this.inputSearchFlag=!0,d.setAttribute("style","display: none"),v.setAttribute("style","display: block")}panelSearchClose(e=!1){this.inputSearchFlag=!1,d.setAttribute("style","display: block"),v.setAttribute("style","display: none"),e||this.panelExtendOpen()}};const F=()=>{var e;e=b,o(l),a.addEventListener("click",(()=>{document.querySelectorAll(".sl-nav__bar .search-panel .history-item").forEach((e=>e.remove())),localStorage.removeItem("history"),l={},i=[]})),r.addEventListener("click",(()=>{e.value.length>0&&(l[e.value]=Date.now(),localStorage.setItem("history",JSON.stringify(l)),o(l))})),g.addEventListener("click",(()=>{E.panelSearchClose(),E.searchClean()})),g.addEventListener("mouseover",(()=>E.panelFocus=!0)),b.addEventListener("focusout",(()=>E.inputFocus=!1)),b.addEventListener("focusin",(()=>E.inputFocus=!0)),b.addEventListener("input",(()=>{b.value.length>0?(E.panelSearchOpen(),E.loadSuggestionPrefabs(6)):(E.panelSearchClose(),E.inputExistFlag=!0)})),b.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),m.click())})),m.addEventListener("click",(()=>{E.panelSearchClose(!0),E.searchClean(),S.scrollIntoView({block:"start",inline:"start",behavior:"smooth"})})),h.addEventListener("click",(()=>E.panelFocus=!1)),p.addEventListener("mouseover",(()=>E.panelFocus=!0))}}}]);